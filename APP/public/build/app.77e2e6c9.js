(self.webpackChunk=self.webpackChunk||[]).push([[524],{1044:(e,t,n)=>{"use strict";n(1629),n(6099),n(8992),n(3949),n(3500),(0,n(3066).E)(n(9090)),n(887),n(2675),n(9463),n(8706),n(2008),n(113),n(3418),n(4423),n(8598),n(2062),n(4114),n(4782),n(1688),n(739),n(3288),n(2010),n(3110),n(8940),n(3362),n(1699),n(7764),n(8156),n(1392),n(4520),n(2577),n(1454),n(6031),n(7154);var o=n(7363),r=n(7950),i=n(666),a=n(8680),c=n(9612),l=n(9336);var d,s,u,m=[],p=new Date,v=[],f=null,y="global",h={"#4285f4":"c-blue-500","#0f9d58":"c-green-500","#f4b400":"c-orange-500","#db4437":"c-red-500","#ab47bc":"c-purple-500","#00acc1":"c-cyan-500","#ff7043":"c-deep-orange-500","#9e9e9e":"c-grey-500"};function g(e,t){var n=document.getElementById("day-events-list");if(n){var o=new Date(e);o.setHours(0,0,0,0);var r=t.filter(function(e){var t=new Date(e.start);t.setHours(0,0,0,0);var n=e.end?new Date(e.end):new Date(e.start);return n.setHours(0,0,0,0),t.getTime()<=o.getTime()&&n.getTime()>=o.getTime()});if(0===r.length)n.innerHTML='\n            <li class="bdB peers ai-c jc-sb fxw-nw p-20">\n                <div class="c-grey-600">\n                    <span>Keine Termine an diesem Tag</span>\n                </div>\n            </li>\n        ';else{var i=new Date;n.innerHTML=r.map(function(e){var t=e.color||e.backgroundColor||"#4285f4",n=h[t]||"c-blue-500",o=e.start&&!e.allDay?new Date(e.start).toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit",hour12:!1}):"",r=new Date(e.start).toLocaleDateString("de-DE",{day:"2-digit",month:"short"}),a=(e.end?new Date(e.end):new Date(e.start))<i,c=a?'style="text-decoration: line-through;"':"";return'\n                <li class="bdB peers ai-c jc-sb fxw-nw" '.concat(a?'style="opacity: 0.5;"':"",'>\n                    <a class="td-n p-20 peers fxw-nw mR-20 peer-greed c-grey-900 event-item"\n                       href="javascript:void(0);"\n                       data-event-id="').concat(e.id,'">\n                        <div class="peer mR-15">\n                            <i class="fa fa-fw fa-clock-o ').concat(n,'"></i>\n                        </div>\n                        <div class="peer">\n                            <span class="fw-600" ').concat(c,">").concat(e.title,'</span>\n                            <div class="c-grey-600">\n                                <span class="c-grey-700">').concat(r).concat(o?" - "+o+" Uhr":"","</span>\n                                ").concat(e.allDay?'<i class="mL-5">(Ganztägig)</i>':"","\n                                ").concat(e.description?"<br><i>"+e.description+"</i>":"","\n                            </div>\n                        </div>\n                    </a>\n                    ").concat(e.extendedProps&&["private","cleaning","technician"].includes(e.extendedProps.type)?'\n                    <div class="peers mR-15">\n                        <div class="peer">\n                            <a href="javascript:void(0);"\n                               class="td-n c-deep-purple-500 cH-blue-500 fsz-md p-5 edit-event"\n                               data-event-id="'.concat(e.id,'">\n                                <i class="ti-pencil"></i>\n                            </a>\n                        </div>\n                        <div class="peer">\n                            <a href="javascript:void(0);"\n                               class="td-n c-red-500 cH-blue-500 fsz-md p-5 delete-event"\n                               data-event-id="').concat(e.id,'">\n                                <i class="ti-trash"></i>\n                            </a>\n                        </div>\n                    </div>'):"","\n                </li>\n            ")}).join(""),n.querySelectorAll(".event-item, .edit-event").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("data-event-id"),n=m.find(function(e){return e.id==t});n&&B(null,n)})}),n.querySelectorAll(".delete-event").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("data-event-id");confirm("Möchten Sie diesen Termin wirklich löschen?")&&L(t)})})}}}function b(){var e=document.getElementById("appointmentModal");e&&(d=new l.aF(e));var t=document.getElementById("productionEventModal");t&&(s=new l.aF(t)),v.forEach(function(e){return e.destroy()}),v=[],f&&(f.destroy(),f=null),document.querySelectorAll(".filter-checkbox").forEach(function(e){var t=e.cloneNode(!0);e.parentNode.replaceChild(t,e),t.addEventListener("change",I)}),document.querySelectorAll('input[name="calendarView"]').forEach(function(e){var t=e.cloneNode(!0);e.parentNode.replaceChild(t,e),t.addEventListener("change",function(){var e,t,n;y=this.value,e=this.value,t=document.getElementById("globalCalendarContainer"),n=document.getElementById("roomCalendarsContainer"),"global"===e?(t&&(t.style.display="block"),n&&(n.style.display="none"),f&&(f.updateSize(),f.refetchEvents())):(t&&(t.style.display="none"),n&&(n.style.display="block"),v.forEach(function(e){e.updateSize(),e.refetchEvents()}))})});var n=document.getElementById("syncApiBtn");if(n){var u=n.cloneNode(!0);n.parentNode.replaceChild(u,n),u.addEventListener("click",E)}var h=window.innerWidth<=767;!function(e){var t=document.getElementById("global-calendar");if(!t)return;f=new o.Vv(t,{plugins:[r.A,i.A,a.Ay],initialView:e?"timeGridDay":"dayGridMonth",locale:c.A,timeZone:"Europe/Berlin",firstDay:1,headerToolbar:e?{left:"prev,next",center:"title",right:"today"}:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},slotMinTime:"06:00:00",slotMaxTime:"22:00:00",allDaySlot:!0,height:700,eventTimeFormat:{hour:"2-digit",minute:"2-digit",hour12:!1,meridiem:!1},eventDisplay:"block",events:function(e,t,n){var o=Array.from(document.querySelectorAll(".filter-checkbox:checked")).map(function(e){return e.value}).join(","),r="/dashboard/events?roomId=&start=".concat(e.startStr,"&end=").concat(e.endStr,"&filters=").concat(o);fetch(r).then(function(e){return e.json()}).then(function(e){return t(e)}).catch(function(e){console.error("Error loading events:",e),n(e)})},dateClick:function(e){B(e.dateStr,null,e.date,null)},eventClick:function(e){var t=e.event.extendedProps.type;if("production_event"===t){var n=e.event.extendedProps.productionEventId;n&&S(n)}else["private","cleaning","technician","production"].includes(t)?B(null,e.event):alert(e.event.title+"\n"+(e.event.extendedProps.description||""))},eventDidMount:function(e){var t=new Date;(e.event.end||e.event.start)<t&&(e.el.style.opacity="0.5",e.el.style.textDecoration="line-through")},editable:!1}),f.render()}(h),function(e){document.querySelectorAll(".room-calendar").forEach(function(t){var n=function(e,t){var n=e.dataset.roomId||"",l=new o.Vv(e,{plugins:[r.A,i.A,a.Ay],initialView:t?"timeGridDay":"dayGridMonth",locale:c.A,timeZone:"Europe/Berlin",firstDay:1,headerToolbar:t?{left:"prev,next",center:"title",right:"today"}:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},slotMinTime:"06:00:00",slotMaxTime:"22:00:00",allDaySlot:!0,height:600,eventTimeFormat:{hour:"2-digit",minute:"2-digit",hour12:!1,meridiem:!1},eventDisplay:"block",events:function(e,t,o){var r=Array.from(document.querySelectorAll(".filter-checkbox:checked")).map(function(e){return e.value}).join(","),i="/dashboard/events?roomId=".concat(n,"&start=").concat(e.startStr,"&end=").concat(e.endStr,"&filters=").concat(r);fetch(i).then(function(e){return e.json()}).then(function(e){return t(e)}).catch(function(e){console.error("Error loading events:",e),o(e)})},dateClick:function(e){B(e.dateStr,null,e.date,n)},eventClick:function(e){var t=e.event.extendedProps.type;if("production_event"===t){var n=e.event.extendedProps.productionEventId;n&&S(n)}else["private","cleaning","technician","production"].includes(t)?B(null,e.event):alert(e.event.title+"\n"+(e.event.extendedProps.description||""))},eventDidMount:function(e){var t=new Date;(e.event.end||e.event.start)<t&&(e.el.style.opacity="0.5",e.el.style.textDecoration="line-through")},editable:!1});return l.render(),l}(t,e);v.push(n)})}(h),fetch("/appointments/all").then(function(e){return e.json()}).then(function(e){m=e,function(e){p=new Date(e),e.getDate();var t=e.toLocaleDateString("de-DE",{weekday:"long"}),n=e.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"}),o=document.getElementById("day-number-text");o&&(o.textContent=n);var r=document.getElementById("day-suffix");r&&(r.textContent="");var i=document.getElementById("day-name");i&&(i.textContent=t.charAt(0).toUpperCase()+t.slice(1))}(p),g(p,e)}).catch(function(e){return console.error(e)}),function(){var e=document.getElementById("saveAppointmentBtn");if(e){var t=e.cloneNode(!0);e.parentNode.replaceChild(t,e),t.addEventListener("click",x)}var n=document.getElementById("deleteAppointmentBtn");if(n){var o=n.cloneNode(!0);n.parentNode.replaceChild(o,n),o.addEventListener("click",A)}var r=document.getElementById("appointmentAllDay");if(r){var i=r.cloneNode(!0);r.parentNode.replaceChild(i,r),i.addEventListener("change",D)}document.querySelectorAll(".type-radio").forEach(function(e){var t=e.cloneNode(!0);e.parentNode.replaceChild(t,e),t.addEventListener("change",T)});var a=document.getElementById("add-appointment-btn");if(a){var c=a.cloneNode(!0);a.parentNode.replaceChild(c,a),c.addEventListener("click",function(){B(p.toISOString().split("T")[0])})}}()}function E(){var e=document.getElementById("syncApiBtn");if(e){var t=e.innerHTML;e.disabled=!0,e.innerHTML='<i class="ti-reload spin"></i> Synchronisiere...';var n=document.createElement("style");n.textContent="\n        .spin {\n            animation: spin 1s linear infinite;\n        }\n        @keyframes spin {\n            from { transform: rotate(0deg); }\n            to { transform: rotate(360deg); }\n        }\n    ",document.querySelector("style[data-sync-spinner]")||(n.setAttribute("data-sync-spinner","true"),document.head.appendChild(n)),fetch("/dashboard/sync-api",{method:"POST",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(n){e.disabled=!1,e.innerHTML=t,n.success?(w("success",n.message),I(),fetch("/appointments/all").then(function(e){return e.json()}).then(function(e){m=e,g(p,e)})):w("error",n.message||"Fehler bei der Synchronisation")}).catch(function(n){e.disabled=!1,e.innerHTML=t,console.error("Sync error:",n),w("error","Netzwerkfehler bei der Synchronisation")})}}function w(e,t){var n=document.createElement("div");n.className="alert alert-".concat("success"===e?"success":"danger"," alert-dismissible fade show position-fixed"),n.style.cssText="top: 20px; right: 20px; z-index: 9999; max-width: 400px;",n.innerHTML="\n        ".concat(t,'\n        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>\n    '),document.body.appendChild(n),setTimeout(function(){n.remove()},5e3)}function I(){"global"===y?f&&f.refetchEvents():v.forEach(function(e){return e.refetchEvents()})}function k(){I()}function S(e){var t=document.getElementById("productionEventModalBody"),n=document.getElementById("productionEventModalTitle"),o=document.getElementById("editProductionEventBtn");s&&(t.innerHTML='\n        <div class="text-center p-5">\n            <div class="spinner-border text-primary" role="status">\n                <span class="visually-hidden">Laden...</span>\n            </div>\n        </div>\n    ',s.show(),fetch("/dashboard/production-event/".concat(e,"/details")).then(function(e){return e.json()}).then(function(e){if(e.error)t.innerHTML='<div class="alert alert-danger">'.concat(e.error,"</div>");else{var r=e.event,i=e.production;n.textContent=i?i.title:"Veranstaltung",o&&(o.href="/production-event/".concat(r.id,"/edit"),o.style.display="inline-block");var a="";if(i&&i.postThumbnailUrl&&(a+='\n                    <div class="text-center mb-4">\n                        <img src="'.concat(i.postThumbnailUrl,'"\n                             alt="').concat(i.title,'"\n                             class="img-fluid rounded"\n                             style="max-height: 300px; object-fit: cover;">\n                    </div>\n                ')),a+='<div class="row mb-4">',a+='<div class="col-md-6">',a+='<h6 class="text-muted mb-3">Veranstaltungsinformationen</h6>',r.date&&(a+='\n                    <div class="mb-2">\n                        <strong><i class="ti-calendar me-2"></i>Datum:</strong>\n                        '.concat(r.date,"\n                    </div>\n                ")),r.timeFrom&&(a+='\n                    <div class="mb-2">\n                        <strong><i class="ti-time me-2"></i>Uhrzeit:</strong>\n                        '.concat(r.timeFrom).concat(r.timeTo?" - "+r.timeTo:""," Uhr\n                    </div>\n                ")),r.room&&(a+='\n                    <div class="mb-2">\n                        <strong><i class="ti-location-pin me-2"></i>Raum:</strong>\n                        '.concat(r.room,"\n                    </div>\n                ")),r.status){var c=r.status.includes("Aktiv")?"success":"secondary";a+='\n                    <div class="mb-2">\n                        <strong>Status:</strong>\n                        <span class="badge bg-'.concat(c,'">').concat(r.status,"</span>\n                    </div>\n                ")}if(a+="</div>",a+='<div class="col-md-6">',a+='<h6 class="text-muted mb-3">Plätze & Reservierungen</h6>',null!==r.quota&&(a+='\n                    <div class="mb-2">\n                        <strong><i class="ti-package me-2"></i>Kontingent:</strong>\n                        '.concat(r.quota," Plätze\n                    </div>\n                ")),null!==r.incomingTotal&&(a+='\n                    <div class="mb-2">\n                        <strong><i class="ti-check me-2"></i>Reserviert:</strong>\n                        '.concat(r.incomingTotal,"\n                    </div>\n                ")),null!==r.freeSeats){var l=r.freeSeats>10?"success":r.freeSeats>0?"warning":"danger";a+='\n                    <div class="mb-2">\n                        <strong><i class="ti-ticket me-2"></i>Frei:</strong>\n                        <span class="badge bg-'.concat(l,'">').concat(r.freeSeats,"</span>\n                    </div>\n                ")}if(a+="</div>",a+="</div>",r.prices&&r.prices.length>0&&(a+='\n                    <div class="mb-4">\n                        <h6 class="text-muted mb-3">Preise</h6>\n                        <div class="table-responsive">\n                            <table class="table table-sm table-bordered">\n                                <thead class="table-light">\n                                    <tr>\n                                        <th>Kategorie</th>\n                                        <th>Preis</th>\n                                        <th>Reservierungen</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                ',r.prices.forEach(function(e){a+="\n                        <tr>\n                            <td>".concat(e.categoryLabel||"-","</td>\n                            <td><strong>").concat(e.priceLabel||"0","€</strong></td>\n                            <td>").concat(e.incomingReservations||0,"</td>\n                        </tr>\n                    ")}),a+="\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                "),r.categories&&r.categories.length>0&&(a+='\n                    <div class="mb-4">\n                        <h6 class="text-muted mb-2">Hinweise</h6>\n                        <div>\n                ',r.categories.forEach(function(e){var t="ausverkauft-event"===e.slug?"danger":"info";a+='<span class="badge bg-'.concat(t,' me-2">').concat(e.name,"</span>")}),a+="\n                        </div>\n                    </div>\n                "),r.reservationNote){var d=r.reservationNote.startsWith("http");a+='\n                    <div class="mb-4">\n                        <h6 class="text-muted mb-2">Reservierung</h6>\n                        '.concat(d?'<a href="'.concat(r.reservationNote,'" target="_blank" class="btn btn-sm btn-outline-primary">\n                                <i class="ti-new-window me-1"></i>Zur Reservierung\n                            </a>'):'<p class="mb-0">'.concat(r.reservationNote,"</p>"),"\n                    </div>\n                ")}i&&i.contentHtml&&(a+='\n                    <div class="mt-4 pt-4 border-top">\n                        <h6 class="text-muted mb-3">Über die Produktion</h6>\n                        <div class="production-content">\n                            '.concat(i.contentHtml,"\n                        </div>\n                    </div>\n                ")),i&&i.permalink&&(a+='\n                    <div class="mt-3">\n                        <a href="'.concat(i.permalink,'" target="_blank" class="btn btn-sm btn-outline-secondary">\n                            <i class="ti-link me-1"></i>Zur Website\n                        </a>\n                    </div>\n                ')),t.innerHTML=a}}).catch(function(e){console.error("Error loading event details:",e),t.innerHTML='\n                <div class="alert alert-danger">\n                    Fehler beim Laden der Event-Details.\n                </div>\n            '}))}function T(){var e=document.querySelector('input[name="appointmentType"]:checked'),t=e?e.value:"private",n=document.getElementById("cleaningSelectGroup"),o=document.getElementById("technicianSelectGroup"),r=document.getElementById("productionSelectGroup"),i=document.getElementById("titleGroup"),a=document.getElementById("appointmentTitle");n&&(n.style.display="cleaning"===t?"block":"none"),o&&(o.style.display="technician"===t?"block":"none"),r&&(r.style.display="production"===t?"block":"none"),i&&(i.style.display="block",a&&a.setAttribute("required","required"))}function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=document.getElementById("appointmentModalLabel"),i=document.getElementById("deleteAppointmentBtn"),a=document.getElementById("appointmentRoom"),c=document.getElementById("appointmentCleaning"),l=document.getElementById("appointmentTechnician"),s=document.getElementById("appointmentProduction"),u=document.getElementById("appointmentTitle"),m=document.getElementById("appointmentDescription");a&&(a.value=""),c&&(c.value=""),l&&(l.value=""),s&&(s.value=""),u&&(u.value=""),m&&(m.value="");var p=document.getElementById("typePrivate");if(p&&(p.checked=!0,T()),t){var v,f;r.textContent="Termin bearbeiten",i.style.display="inline-block";var y=String(t.id),h=y;y.includes("_")&&(h=y.split("_")[1]),document.getElementById("appointmentId").value=h;var g=(null===(v=t.extendedProps)||void 0===v?void 0:v.originalTitle)||t.title;u&&(u.value=g),m&&(m.value=(null===(f=t.extendedProps)||void 0===f?void 0:f.description)||""),t.extendedProps&&t.extendedProps.roomId&&a&&(a.value=t.extendedProps.roomId);var b=t.extendedProps.type||"private",E=document.querySelector('input[name="appointmentType"][value="'.concat(b,'"]'));E&&(E.checked=!0,T()),"cleaning"===b&&t.extendedProps.cleaningId&&c&&(c.value=t.extendedProps.cleaningId),"technician"===b&&t.extendedProps.technicianId&&l&&(l.value=t.extendedProps.technicianId),"production"===b&&t.extendedProps.productionId&&s&&(s.value=t.extendedProps.productionId);var w=t.start,I=t.end||t.start;if(t.allDay){var k=new Date(I);k.setDate(k.getDate()-1),I=k}document.getElementById("appointmentStart").value=_(w,t.allDay),document.getElementById("appointmentEnd").value=_(I,t.allDay),document.getElementById("appointmentAllDay").checked=t.allDay,D({target:{checked:t.allDay}})}else{r.textContent="Neuer Termin",i.style.display="none",document.getElementById("appointmentId").value="";var S,B,x=document.getElementById("appointmentStart"),L=document.getElementById("appointmentEnd");x.value="",L.value="",o&&a&&(a.value=o),n?(S=n,(B=new Date(S.getTime())).setHours(B.getHours()+1),document.getElementById("appointmentAllDay").checked=!1):((S=e?new Date(e):new Date).setHours(9,0,0,0),(B=new Date(S)).setHours(10,0,0,0),document.getElementById("appointmentAllDay").checked=!1),x.value=_(S),L.value=_(B),D({target:{checked:!1}})}d&&d.show()}function _(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return"";var n=e instanceof Date?e:new Date(e),o=function(e){return String(e).padStart(2,"0")},r="".concat(n.getFullYear(),"-").concat(o(n.getMonth()+1),"-").concat(o(n.getDate()));return t?r:"".concat(r,"T").concat(o(n.getHours()-1),":").concat(o(n.getMinutes()))}function D(e){var t=document.getElementById("appointmentStart"),n=document.getElementById("appointmentEnd");e.target.checked?(t.type="date",n.type="date",t.value.includes("T")&&(t.value=t.value.split("T")[0]),n.value.includes("T")&&(n.value=n.value.split("T")[0])):(t.type="datetime-local",n.type="datetime-local")}function x(){var e=document.getElementById("appointmentId").value,t=document.getElementById("appointmentTitle").value,n=document.getElementById("appointmentDescription").value,o=document.getElementById("appointmentRoom")?document.getElementById("appointmentRoom").value:null,r=document.querySelector('input[name="appointmentType"]:checked'),i=r?r.value:"private",a=null,c=null,l=null;"cleaning"===i?(a=document.getElementById("appointmentCleaning").value,t||(t="Reinigung")):"technician"===i?(c=document.getElementById("appointmentTechnician").value,t||(t="Techniker")):"production"===i&&(l=document.getElementById("appointmentProduction").value,t||(t="Produktion"));var s=document.getElementById("appointmentStart").value,u=document.getElementById("appointmentEnd").value,v=document.getElementById("appointmentAllDay").checked;if(t&&s&&u){if(v){s+="T00:00:00";var f=u.split("-"),y=new Date(parseInt(f[0]),parseInt(f[1])-1,parseInt(f[2]));y.setDate(y.getDate()+1),u=y.getFullYear()+"-"+String(y.getMonth()+1).padStart(2,"0")+"-"+String(y.getDate()).padStart(2,"0")+"T00:00:00"}var h={title:t,description:n,start:s,end:u,allDay:v,roomId:o,cleaningId:a,technicianId:c,productionId:l},b=e?"/appointment/".concat(e,"/edit"):"/appointment/create";fetch(b,{method:e?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}).then(function(e){return e.json()}).then(function(e){e.success?(d.hide(),k(),fetch("/appointments/all").then(function(e){return e.json()}).then(function(e){m=e,g(p,e)})):alert("Fehler beim Speichern.")}).catch(function(e){return console.error(e)})}else alert("Bitte füllen Sie alle Pflichtfelder aus.")}function L(e){var t=String(e),n=t;t.includes("_")&&(n=t.split("_")[1]),fetch("/appointment/".concat(n,"/delete"),{method:"DELETE"}).then(function(e){return e.json()}).then(function(e){e.success?(d._isShown&&d.hide(),k(),fetch("/appointments/all").then(function(e){return e.json()}).then(function(e){m=e,g(p,e)})):alert("Fehler beim Löschen.")})}function A(){var e=document.getElementById("appointmentId").value;e&&confirm("Wirklich löschen?")&&L(e)}function C(){var e=document.getElementById("keyManagementModal");if(e){u=new l.aF(e),document.querySelectorAll(".key-item-btn").forEach(function(e){var t=e.cloneNode(!0);e.parentNode.replaceChild(t,e),t.addEventListener("click",function(){!function(e){if(!e)return;var t=e.dataset.keyId,n=e.dataset.keyName,o=e.dataset.keyStatus,r=document.getElementById("keyId");r&&(r.value=t);var i=document.getElementById("modalKeyNameTitle");i&&(i.textContent=n);var a=document.getElementById("keyStatus");a&&(a.value=o,a.dispatchEvent(new Event("change")));var c=document.getElementById("keyBorrowDate");c&&(c.value=e.dataset.borrowDate);var l=document.getElementById("keyReturnDate");l&&(l.value=e.dataset.returnDate);var d=e.dataset.userId,s=e.dataset.techId,m=e.dataset.prodId,p=e.dataset.cleanId,v=document.getElementById("borrowerType");if(v){var f=document.getElementById("userId");f&&(f.value="");var y=document.getElementById("technicianId");y&&(y.value="");var h=document.getElementById("productionId");h&&(h.value="");var g=document.getElementById("cleaningId");g&&(g.value=""),d&&f?(v.value="user",f.value=d):s&&y?(v.value="technician",y.value=s):m&&h?(v.value="production",h.value=m):p&&g?(v.value="cleaning",g.value=p):v.value="",v.dispatchEvent(new Event("change"))}u&&u.show()}(this)})});var t=document.getElementById("keyStatus");if(t){var n=t.cloneNode(!0);t.parentNode.replaceChild(n,t),n.addEventListener("change",function(){var e=document.getElementById("borrowDetails");"borrowed"===this.value?e&&(e.style.display="block"):e&&(e.style.display="none")})}var o=document.getElementById("borrowerType");if(o){var r=o.cloneNode(!0);o.parentNode.replaceChild(r,o),r.addEventListener("change",function(){if(document.querySelectorAll(".borrower-select").forEach(function(e){return e.style.display="none"}),this.value){var e=this.value+"SelectDiv",t=document.getElementById(e);t&&(t.style.display="block")}})}var i=document.getElementById("saveKeyBtn");if(i){var a=i.cloneNode(!0);i.parentNode.replaceChild(a,i),a.addEventListener("click",P)}}}function P(){var e=document.getElementById("keyId"),t=document.getElementById("keyStatus");if(e&&t){var n=e.value,o=function(e){var t=document.getElementById(e);return t?t.value:null},r={status:t.value,userId:o("userId"),technicianId:o("technicianId"),productionId:o("productionId"),cleaningId:o("cleaningId"),borrowDate:o("keyBorrowDate"),returnDate:o("keyReturnDate")};fetch("/dashboard/key/".concat(n,"/update"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(function(e){e.ok?(u.hide(),window.location.reload()):alert("Fehler beim Speichern")}).catch(function(e){return console.error(e)})}}document.addEventListener("DOMContentLoaded",function(){b(),C()}),document.addEventListener("turbo:render",function(){b(),C()});var j=n(5194);n(3742);function N(){document.querySelectorAll("table.mcDataTable").forEach(function(e){e.dataset.dtInit||(new j.A(e,{responsive:!0,pageLength:10,lengthMenu:[10,25,50,100],language:{search:"Suchen:",lengthMenu:"_MENU_ pro Seite",info:"Zeige _START_–_END_ von _TOTAL_",zeroRecords:"Keine Einträge gefunden",infoEmpty:"Keine Einträge verfügbar"}}),e.dataset.dtInit="1")})}document.addEventListener("DOMContentLoaded",N),document.addEventListener("turbo:render",N);var O=n(2354);function M(){document.querySelectorAll(".tom-select").forEach(function(e){"1"!==e.dataset.tomSelectInitialized&&(e.dataset.tomSelectInitialized="1",e.tomselect&&"function"==typeof e.tomselect.destroy&&e.tomselect.destroy(),new O.A(e,{plugins:["remove_button"],create:!1,maxItems:null,placeholder:e.getAttribute("data-placeholder")||"Bitte auswählen"}))})}function R(){var e=document.querySelector("#production_type"),t=document.getElementById("group-fields"),n=document.getElementById("individual-fields");function o(){var o=e.value;console.log("toggleFields",o),t.style.display="none",n.style.display="none","group"===o?t.style.display="block":"individual"===o&&(n.style.display="block")}e&&t&&n&&(e._productionTypeToggleListener&&e.removeEventListener("change",e._productionTypeToggleListener),e._productionTypeToggleListener=o,e.addEventListener("change",o),o())}function H(){M(),R()}document.addEventListener("DOMContentLoaded",H),document.addEventListener("turbo:load",H),document.addEventListener("turbo:render",H),document.addEventListener("turbo:visit",function(){M(),window.AdminatorApp&&"function"==typeof window.AdminatorApp.init&&window.AdminatorApp.refresh(),R()}),window.__confirmDeleteBound||(window.__confirmDeleteBound=!0,document.addEventListener("click",function(e){if(0===e.button){var t=e.target.closest("[data-confirm], [data-confirm-message], .confirmRemoveItem");if(t&&document.contains(t)){var n=t.getAttribute("data-confirm-message")||t.getAttribute("data-confirm")||"Eintrag wirklich löschen?";if(!window.confirm(n))return e.preventDefault(),void e.stopImmediatePropagation();if("A"===t.tagName){var o=t.getAttribute("href");o&&(e.preventDefault(),e.stopImmediatePropagation(),window.Turbo&&"function"==typeof window.Turbo.visit?window.Turbo.visit(o):window.location.assign(o))}}}},!0))},4842:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});n(2675),n(9463),n(2259),n(5700),n(6280),n(6918),n(3792),n(9572),n(4170),n(2892),n(9904),n(4185),n(875),n(3548),n(287),n(6099),n(825),n(7764),n(2953);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,i(o.key),o)}}function i(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function a(e,t,n){return t=l(t),function(e,t){if(t&&("object"==o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(o=[{key:"connect",value:function(){this.element.textContent="Hello Stimulus! Edit me in assets/controllers/hello_controller.js"}}])&&r(n.prototype,o),i&&r(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,i}(n(2891).xI)},5411:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});n(2675),n(9463),n(2259),n(5700),n(6280),n(6918),n(1629),n(3418),n(4423),n(3792),n(4114),n(9572),n(4170),n(2010),n(2892),n(9904),n(4185),n(875),n(3548),n(287),n(6099),n(825),n(7495),n(1699),n(7764),n(5440),n(9978),n(8992),n(3949),n(3500),n(2953),n(6031);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,s(o.key),o)}}function i(e,t,n){return t=c(t),function(e,t){if(t&&("object"==o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,a()?Reflect.construct(t,n||[],c(e).constructor):t.apply(e,n))}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(a=function(){return!!e})()}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function d(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(t,e),n=t,o=[{key:"connect",value:function(){var e=this;this._connected||(this._connected=!0,this.hasIndexValue||(this.indexValue=this.listTarget.querySelectorAll("[data-collection-item]").length),this._onClick=function(t){var n=t.target.closest('.js-collection-add,[data-action~="click->form-collection#add"]');if(n&&e.element.contains(n))return t.preventDefault(),void e._handleAddOnce();var o=t.target.closest('.js-collection-remove,[data-action~="click->form-collection#remove"]');o&&e.element.contains(o)&&(t.preventDefault(),e.remove({currentTarget:o}))},this.element.addEventListener("click",this._onClick,{passive:!1}),this._onBeforeCache=function(){return e.disconnect()},this._onBeforeRender=function(){return e.disconnect()},this._onPageShow=function(t){t.persisted&&e.disconnect()},document.addEventListener("turbo:before-cache",this._onBeforeCache),document.addEventListener("turbo:before-render",this._onBeforeRender),window.addEventListener("pageshow",this._onPageShow),this.renumber())}},{key:"disconnect",value:function(){this._onClick&&this.element.removeEventListener("click",this._onClick),this._onBeforeCache&&document.removeEventListener("turbo:before-cache",this._onBeforeCache),this._onBeforeRender&&document.removeEventListener("turbo:before-render",this._onBeforeRender),this._onPageShow&&window.removeEventListener("pageshow",this._onPageShow),this._onClick=null,this._onBeforeCache=null,this._onBeforeRender=null,this._onPageShow=null,this._bound=!1,this._connected=!1}},{key:"_handleAddOnce",value:function(){var e=this;if(!this._clickLocked){this._clickLocked=!0;try{this.add()}finally{setTimeout(function(){e._clickLocked=!1},0)}}}},{key:"add",value:function(){var e=this.prototypeTarget.content.cloneNode(!0);this._replaceInFragment(e,"__name__",String(this.indexValue++));var t=e.querySelector("tr[data-collection-item]")||e.firstElementChild;t&&(this.listTarget.appendChild(t),this.renumber())}},{key:"remove",value:function(e){var t=e.currentTarget.closest("[data-collection-item]");t&&t.remove(),this.renumber()}},{key:"renumber",value:function(){this.listTarget.querySelectorAll("[data-collection-item] [data-collection-counter]").forEach(function(e,t){return e.textContent=String(t+1)})}},{key:"_replaceInFragment",value:function(e,t,n){for(var o=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT),r=[];o.nextNode();)r.push(o.currentNode);r.forEach(function(e){if(e.nodeType===Node.TEXT_NODE)e.nodeValue=e.nodeValue.replaceAll(t,n);else if(e.nodeType===Node.ELEMENT_NODE)for(var o=0,r=Array.from(e.attributes);o<r.length;o++){var i=r[o];i.value.includes(t)&&e.setAttribute(i.name,i.value.replaceAll(t,n))}})}}],o&&r(n.prototype,o),a&&r(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(n(2891).xI);d(u,"targets",["list","prototype"]),d(u,"values",{index:Number})},5828:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o={"symfony--ux-turbo--turbo-core":n(6773).A}},7502:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l,generateCsrfHeaders:()=>a,generateCsrfToken:()=>i,removeCsrfToken:()=>c});n(6918),n(3792),n(2062),n(4743),n(1745),n(8309),n(6573),n(8100),n(7936),n(9432),n(6099),n(7495),n(906),n(1489),n(8140),n(1630),n(2170),n(5044),n(1920),n(1694),n(9955),n(1903),n(1134),n(3206),n(4496),n(6651),n(2887),n(9369),n(6812),n(8995),n(1575),n(6072),n(8747),n(8845),n(9423),n(7301),n(373),n(6614),n(1405),n(7467),n(4732),n(3684),n(9577),n(8992),n(1454),n(2207),n(5815),n(4979),n(9739);var o=/^[-_a-zA-Z0-9]{4,22}$/,r=/^[-_/+a-zA-Z0-9]{24,}$/;function i(e){var t=e.querySelector('input[data-controller="csrf-protection"], input[name="_csrf_token"]');if(t){var n=t.getAttribute("data-csrf-protection-cookie-value"),i=t.value;if(!n&&o.test(i)&&(t.setAttribute("data-csrf-protection-cookie-value",n=i),t.defaultValue=i=btoa(String.fromCharCode.apply(null,(window.crypto||window.msCrypto).getRandomValues(new Uint8Array(18)))),t.dispatchEvent(new Event("change",{bubbles:!0}))),n&&r.test(i)){var a=n+"_"+i+"="+n+"; path=/; samesite=strict";document.cookie="https:"===window.location.protocol?"__Host-"+a+"; secure":a}}}function a(e){var t={},n=e.querySelector('input[data-controller="csrf-protection"], input[name="_csrf_token"]');if(!n)return t;var i=n.getAttribute("data-csrf-protection-cookie-value");return r.test(n.value)&&o.test(i)&&(t[i]=n.value),t}function c(e){var t=e.querySelector('input[data-controller="csrf-protection"], input[name="_csrf_token"]');if(t){var n=t.getAttribute("data-csrf-protection-cookie-value");if(r.test(t.value)&&o.test(n)){var i=n+"_"+t.value+"=0; path=/; samesite=strict; max-age=0";document.cookie="https:"===window.location.protocol?"__Host-"+i+"; secure":i}}}document.addEventListener("submit",function(e){i(e.target)},!0),document.addEventListener("turbo:submit-start",function(e){var t=a(e.detail.formSubmission.formElement);Object.keys(t).map(function(n){e.detail.formSubmission.fetchRequest.headers[n]=t[n]})}),document.addEventListener("turbo:submit-end",function(e){c(e.detail.formSubmission.formElement)});const l="csrf-protection-controller"},9090:(e,t,n)=>{var o={"./csrf_protection_controller.js":7502,"./form_collection_controller.js":5411,"./hello_controller.js":4842};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=9090}},e=>{e.O(0,[667],()=>{return t=1044,e(e.s=t);var t});e.O()}]);