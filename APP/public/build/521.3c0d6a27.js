"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[521],{29521:(e,t,o)=>{o.r(t),o.d(t,{bootTodo:()=>s});o(52675),o(89463),o(28706),o(51629),o(60739),o(33110),o(26099),o(3362),o(98992),o(3949),o(23500);var n,d=o(89336);function c(){var e=document.getElementById("todo-list");e&&fetch("/dashboard/all-todos").then(function(e){return e.json()}).then(function(t){e.innerHTML="",t.forEach(function(t){var o=t.description||"",d=document.createElement("li");d.className="bdB peers ai-c jc-sb fxw-nw todo-item-btn",d.style.cursor="pointer",d.dataset.todoId=t.id,d.dataset.todoDescription=o,d.innerHTML='\n                    <div class="td-n p-20 peers fxw-nw me-20 peer-greed c-grey-900">\n                        <div class="peer mR-15">\n                            <i class="ti-todo"></i>\n                        </div>\n                        <div class="peer">\n                            <span class="fw-600">Todo</span>\n                            <div class="c-grey-600">\n                                <span class="c-grey-700">'.concat(o,'</span>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="peers mR-15">\n                        <div class="peer">\n                            <a class="checkTodo badge rounded-pill fl-r bg-success lh-0 p-10" data-todo-id="').concat(t.id,'">Done</a>\n                        </div>\n                    </div>\n                '),d.addEventListener("click",function(){a(t.id)}),d.querySelector(".checkTodo").addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var t=e.currentTarget.dataset.todoId;confirm("Willst du dieses Todo wirklich als erledigt markieren?")&&function(e){if(!e)return;var t={done:!0},o="";o=e?"/dashboard/todo/".concat(e,"/update"):"/dashboard/todo/create";fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){e.ok?(n.hide(),c()):alert("Fehler beim Speichern")}).catch(function(e){return console.error(e)})}(t)}),e.appendChild(d)})}).catch(function(e){return console.error("Error loading todos:",e)})}function r(){var e=document.getElementById("todoModal");if(e){c(),n=new d.aF(e),document.querySelectorAll(".todo-item-btn").forEach(function(e){var t=e.cloneNode(!0);e.parentNode.replaceChild(t,e),t.addEventListener("click",function(){a(this)})});var t=document.getElementById("saveTodoBtn");if(t){var o=t.cloneNode(!0);t.parentNode.replaceChild(o,t),o.addEventListener("click",i)}var r=document.querySelector('.btn-success[data-bs-target="#todoModal"]');if(r){var s=r.cloneNode(!0);r.parentNode.replaceChild(s,r),s.addEventListener("click",function(e){e.preventDefault(),function(){var e=document.getElementById("todoId"),t=document.getElementById("todoDescription");e&&(e.value="");t&&(t.value="")}()})}}}function a(e){var t=document.querySelector('.todo-item-btn[data-todo-id="'.concat(e,'"]'));t||(t=e);var o=t.dataset.todoId,d=t.dataset.todoDescription,c=document.getElementById("todoId");c&&(c.value=o);var r=document.getElementById("todoDescription");r&&(r.textContent=d),n&&n.show()}function i(){var e=document.getElementById("todoId"),t=document.getElementById("todoDescription");if(e&&t){var o=e.value,d={description:t.value},r="";r=o?"/dashboard/todo/".concat(o,"/update"):"/dashboard/todo/create",fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).then(function(e){e.ok?(n.hide(),c()):alert("Fehler beim Speichern")}).catch(function(e){return console.error(e)})}}function s(){r()}window.todoBound||(window.__todoBound=!0,document.addEventListener("DOMContentLoaded",s),document.addEventListener("turbo:load",s),document.addEventListener("turbo:render",s),document.addEventListener("turbo:visit",s))}}]);